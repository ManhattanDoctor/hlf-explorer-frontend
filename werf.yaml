configVersion: 1
project: hlf-explorer-front
---
artifact: hlf-explorer-artifact
from: node:12.18.3
git:
  - add: /
    to: /app
    stageDependencies:
      install:
        - package.json
        - package-lock.json
      setup:
        - angular.json
        - htdocs/*
        - src/*
ansible:
  install:
    - name: Install npm dependencies
      shell: npm install
      args:
        chdir: /app
  setup:
    - name: Build
      shell: npm run build
      args:
        chdir: /app
---
image: hlf-explorer
from: nginx:1.17.1-alpine
docker:
  WORKDIR: /app
  ENV:
    TERM: xterm
    HOME: /app
import:
  - artifact: hlf-explorer-artifact
    add: /app/build/main/
    to: /app
    before: install
